<!doctype html>
<html lang="en">
<head>
  <script>
    if (window.location.pathname.endsWith('/settings.html')) {
      const params = window.location.search;
      window.location.replace('/?route=/settings' + (params ? '&' + params.substring(1) : ''));
    }
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7925754855607435"
     crossorigin="anonymous"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-H5VGHQJKD8"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-H5VGHQJKD8');
  </script>
  <meta charset="utf-8" />
  <meta name="referrer" content="no-referrer-when-downgrade" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Settings</title>
  <link rel="stylesheet" href="/css/_tokens.css" />
  <link rel="stylesheet" href="/css/settings.css" />
  <link rel="stylesheet" href="/css/auth.css" />
  <link rel="icon" type="image/png" id="favicon" href="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/logos/nexora-amber.png">
</head>
<body>
  <div class="settings-root" id="settingsRoot" aria-live="polite">
    <div class="app">
      <div class="header-row">
        <h1 class="settings-title">Settings</h1>

        <nav class="nav-buttons" role="tablist" aria-label="Settings sections">
        <button class="nav-btn active" data-target="appearance" role="tab" aria-selected="true">Appearance</button>
        <button class="nav-btn" data-target="cloaking" role="tab" aria-selected="false">Cloaking</button>
        <button class="nav-btn" data-target="legal" role="tab" aria-selected="false">Legal</button>
        <button class="nav-btn" data-target="misc" role="tab" aria-selected="false">Misc</button>
        </nav>
      </div>

      <div class="content">
        <section id="appearance" class="panel" role="tabpanel">
          <div class="section">
            <h2>Theme</h2>
            <p class="description">Choose a visual theme for the interface.</p>

            <div class="theme-options" role="list">
              <button class="theme-option selected" data-value="midnight-amber" role="listitem" aria-pressed="true">Midnight Amber</button>
              <button class="theme-option" data-value="midnight-blueberry" role="listitem" aria-pressed="false">Midnight Blueberry</button>
              <button class="theme-option" data-value="midnight-grape" role="listitem" aria-pressed="false">Midnight Grape</button>
            </div>

            <div style="height:12px;"></div>

            <h2>Dark/Light Mode</h2>
            <p class="description">Toggle the global color scheme between dark and light. When enabled, the interface will use the selected dark theme; disable for the light scheme. This preference is saved locally.</p>

            <div class="subsection" style="display:flex;flex-direction:column;gap:12px;">
              <div class="row" style="align-items:center; margin:0; gap:16px;">
                <div class="toggle" tabindex="0" role="switch" aria-checked="false" id="schemeToggle" aria-label="Toggle dark light mode">
                  <input id="schemeToggleInput" type="checkbox" aria-hidden="true" />
                  <span class="toggle-track" aria-hidden="true">
                    <span class="toggle-thumb" aria-hidden="true">
                      <svg class="toggle-icon moon-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                      </svg>
                      <svg class="toggle-icon sun-icon" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                        <circle cx="12" cy="12" r="5"/><path d="M12 1v6m0 6v6m11-7h-6m-6 0H1m17.66-5.66l-4.24 4.24m-6 6l-4.24 4.24m12.48 0l-4.24-4.24m-6-6L6.34 4.34"/>
                      </svg>
                    </span>
                  </span>
                </div>
                <span class="toggle-label" id="schemeLabel" style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Light Mode</span>
              </div>
            </div>

            <div style="height:16px;"></div>

            <h2>Performance</h2>
            <p class="description">Customize visual effects and animations to match your device's performance. Choose a preset or customize individual options.</p>

            <div class="subsection">
              <h3 style="margin:0;font-size:15px;color:var(--settings-accent);font-weight:600;">Presets</h3>
              <p class="description" style="margin-top:6px;">Quick performance configurations optimized for different use cases.</p>

              <div class="performance-presets" role="list" style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;">
                <button class="performance-preset-btn" data-preset="fast" role="listitem" aria-pressed="false">
                  <div class="preset-icon">⚡</div>
                  <div class="preset-info">
                    <div class="preset-name">Fast</div>
                    <div class="preset-desc">Minimal effects for maximum speed</div>
                  </div>
                </button>
                <button class="performance-preset-btn" data-preset="normal" role="listitem" aria-pressed="false">
                  <div class="preset-icon">⚙️</div>
                  <div class="preset-info">
                    <div class="preset-name">Normal</div>
                    <div class="preset-desc">Balanced performance and visuals</div>
                  </div>
                </button>
                <button class="performance-preset-btn selected" data-preset="fancy" role="listitem" aria-pressed="true">
                  <div class="preset-icon">✨</div>
                  <div class="preset-info">
                    <div class="preset-name">Fancy</div>
                    <div class="preset-desc">Full effects for premium experience</div>
                  </div>
                </button>
              </div>

              <div style="height:16px;"></div>

              <h3 style="margin:0;font-size:15px;color:var(--settings-accent);font-weight:600;">Custom Options</h3>
              <p class="description" style="margin-top:6px;">Fine-tune individual performance settings to your preference.</p>

              <div style="display:flex;flex-direction:column;gap:16px;margin-top:12px;">
                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Particle Effects</div>
                    <div class="description" style="margin-top:4px;">Animated particle effects in the background</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="particlesToggle" aria-label="Toggle particle effects">
                    <input id="particlesToggleInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>

                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Mouse Highlight Tracking</div>
                    <div class="description" style="margin-top:4px;">Interactive glow effects that follow your cursor</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="mouseTrackingToggle" aria-label="Toggle mouse tracking">
                    <input id="mouseTrackingInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>

                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Animations</div>
                    <div class="description" style="margin-top:4px;">Smooth transitions and entrance animations</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="animationsToggle" aria-label="Toggle animations">
                    <input id="animationsInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>

                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Glow Effects</div>
                    <div class="description" style="margin-top:4px;">Luminous shadows and accent glows</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="glowToggle" aria-label="Toggle glow effects">
                    <input id="glowInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>

                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Backdrop Blur</div>
                    <div class="description" style="margin-top:4px;">Frosted glass background blur effects</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="blurToggle" aria-label="Toggle backdrop blur">
                    <input id="blurInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>

                <div class="row" style="align-items:center; margin:0; gap:16px; justify-content:space-between;">
                  <div style="flex:1;">
                    <div style="font-weight: 600; color: var(--settings-accent); font-size: 15px;">Hover Transforms</div>
                    <div class="description" style="margin-top:4px;">Scale and lift effects on hover interactions</div>
                  </div>
                  <div class="toggle" tabindex="0" role="switch" aria-checked="true" id="transformsToggle" aria-label="Toggle hover transforms">
                    <input id="transformsInput" type="checkbox" aria-hidden="true" />
                    <span class="toggle-track" aria-hidden="true">
                      <span class="toggle-thumb" aria-hidden="true"></span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="cloaking" class="panel" role="tabpanel" hidden>
          <div class="section">
            <h2>About:Blank</h2>
            <p class="description">Prevents others from seeing your screen and hides this site from browser history.</p>
            
            <div class="subsection" style="display:flex;flex-direction:column;gap:12px;">
              <div class="row" style="align-items:center; margin:0;">
                <div class="toggle" tabindex="0" role="switch" aria-checked="false" id="aboutToggle" aria-label="Toggle about blank cloaking">
                  <input id="aboutToggleInput" type="checkbox" aria-hidden="true" />
                  <span class="toggle-track" aria-hidden="true"><span class="toggle-thumb" aria-hidden="true"></span></span>
                </div>
              </div>
              <div id="auto-cloak-status" style="margin-top:12px;padding:12px;border-radius:8px;background:var(--settings-panel-2);display:none;">
                <p style="margin:0;color:var(--settings-accent);font-weight:600;">✓ Auto-Cloaking Active</p>
                <p class="description" style="margin:6px 0 0 0;">The next time you visit this site's URL, it will automatically open in about:blank.</p>
              </div>
            </div>

            <div style="height:16px;"></div>

            <div class="subsection">
              <h2 class="tab-appearance-heading">Tab Disguise</h2>
              <p class="description" style="margin-top:6px;">Choose which educational site to disguise as. When auto-cloaking is enabled, the original tab will redirect to this site.</p>

              <div style="margin-top:8px;">
                <label for="disguiseSelect" class="description" style="display:block;margin-bottom:8px;">Select a disguise</label>
                <select id="disguiseSelect" class="theme-option" style="min-width:240px;">
                  <option value="">(None)</option>
                  <option value="Clever">Clever</option>
                  <option value="Google Classroom">Google Classroom</option>
                  <option value="Canvas">Canvas</option>
                  <option value="Google Drive">Google Drive</option>
                  <option value="Seesaw">Seesaw</option>
                  <option value="Edpuzzle">Edpuzzle</option>
                  <option value="Kahoot!">Kahoot!</option>
                  <option value="Quizlet">Quizlet</option>
                  <option value="Khan Academy">Khan Academy</option>
                </select>
                <div id="disguise-locked-note" class="hidden-note" aria-hidden="true" style="display:none;">This disguise is active. When auto-cloaking is enabled, you'll be redirected to this site.</div>
              </div>

              <div id="disguise-preview" style="margin-top:12px; display:flex;gap:12px;align-items:center;">
                <div id="disguise-badge" aria-hidden="true" style="width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:var(--settings-panel-2);"></div>
                <div>
                  <div id="disguise-title" style="font-weight:700;font-size:15px;color:var(--settings-accent);">No disguise</div>
                  <div id="disguise-sub" class="description" style="margin-top:6px;">Your tab will keep the current title and favicon.</div>
                  <div style="margin-top:8px; display:flex; gap:12px; align-items:center;">
                  </div>
                </div>
              </div>
            </div>

            <div style="height:16px;"></div>

            <div class="subsection">
              <h2 class="tab-appearance-heading">Panic Button</h2>
              <p class="description" style="margin-top:6px;">Set a keybind to instantly redirect to a safe URL. Useful for quickly switching tabs when someone approaches.</p>

              <div style="margin-top:12px;">
                <label for="panicKeyInput" class="description" style="display:block;margin-bottom:8px;">Keybind (e.g., Escape, Space, or key combination)</label>
                <input 
                  id="panicKeyInput" 
                  type="text" 
                  placeholder="Click and press your key combination" 
                  readonly
                  class="theme-option" 
                  style="min-width:240px;cursor:pointer;user-select:none;"
                />
                <button id="clearPanicKey" class="blank-link" style="margin-top:8px;display:inline-block;background:transparent;border:1px solid var(--settings-accent);color:var(--settings-accent);">Clear Keybind</button>
              </div>

              <div style="margin-top:12px;">
                <label for="panicUrlInput" class="description" style="display:block;margin-bottom:8px;">Redirect URL</label>
                <input 
                  id="panicUrlInput" 
                  type="url" 
                  placeholder="https://classroom.google.com" 
                  class="theme-option" 
                  style="min-width:360px;"
                />
              </div>

              <div id="panic-status" style="margin-top:12px;padding:12px;border-radius:8px;background:var(--settings-panel-2);display:none;">
                <p style="margin:0;color:var(--settings-accent);font-weight:600;">✓ Panic Button Active</p>
                <p class="description" style="margin:6px 0 0 0;">Press <span id="panic-key-display" style="font-weight:600;color:var(--settings-accent);"></span> to instantly redirect.</p>
              </div>
            </div>
          </div>
        </section>

        <section id="legal" class="panel" role="tabpanel" hidden>
          <div class="section">
            <h2>Legal</h2>
            <p class="description">Policies and links related to privacy and cookies for this project.</p>

            <div class="subsection" aria-hidden="false" style="padding:10px;">
              <div class="policy-block" role="region" aria-labelledby="privacy-title">
                <div class="policy-info">
                  <p id="privacy-title" class="policy-title">Privacy Policy</p>
                  <p class="policy-desc">Read the project's Privacy Policy to learn what data is collected, how it is used, and your rights regarding personal information.</p>
                </div>
                <div class="policy-actions">
                  <a class="policy-btn" role="button" href="https://thenexoraproject.xyz/legal/privacy-policy" target="_blank" rel="noopener noreferrer" aria-label="Open Privacy Policy">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>

              <div style="height:12px;"></div>

              <div class="policy-block" role="region" aria-labelledby="cookie-title">
                <div class="policy-info">
                  <p id="cookie-title" class="policy-title">Cookie Policy</p>
                  <p class="policy-desc">View the Cookie Policy to understand what cookies are used, why they are stored, and how you can manage cookie preferences.</p>
                </div>
                <div class="policy-actions">
                  <a class="policy-btn" role="button" href="https://thenexoraproject.xyz/legal/cookies" target="_blank" rel="noopener noreferrer" aria-label="Open Cookie Policy">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>

              <div style="height:12px;"></div>

              <div class="policy-block" role="region" aria-labelledby="disclaimer-title">
                <div class="policy-info">
                  <p id="disclaimer-title" class="policy-title">Disclaimer</p>
                  <p class="policy-desc">Read the Disclaimer to understand the limitations of liability and other important legal notices for using this project.</p>
                </div>
                <div class="policy-actions">
                  <a class="policy-btn" role="button" href="https://thenexoraproject.xyz/legal/disclaimer.html" target="_blank" rel="noopener noreferrer" aria-label="Open Disclaimer">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>

              <div style="height:12px;"></div>

              <div class="policy-block" role="region" aria-labelledby="dmca-title">
                <div class="policy-info">
                  <p id="dmca-title" class="policy-title">DMCA Policy</p>
                  <p class="policy-desc">View the DMCA Policy to understand copyright infringement procedures and how to submit takedown requests.</p>
                </div>
                <div class="policy-actions">
                  <a class="policy-btn" role="button" href="https://thenexoraproject.xyz/legal/dmca-policy.html" target="_blank" rel="noopener noreferrer" aria-label="Open DMCA Policy">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="misc" class="panel" role="tabpanel" hidden>
          <div class="section">
            <h2>Account</h2>
            <p class="description">Manage your Nexora account and sync your data across devices.</p>

            <div id="profileSection" class="profile-section">
              <!-- Profile content will be injected by auth.js -->
              <div id="profileLoggedOut" class="profile-login-prompt">
                <p>Sign in to sync your settings, preferences, and data across all your devices.</p>
                <button class="profile-btn profile-btn-primary" id="openAuthBtn">Sign In / Create Account</button>
              </div>

              <div id="profileLoggedIn" style="display: none;">
                <div class="profile-header">
                  <div class="profile-avatar" id="profileAvatar">?</div>
                  <div class="profile-info">
                    <h3 class="profile-username" id="profileUsername">Username</h3>
                    <div class="profile-status">Signed in</div>
                  </div>
                </div>

                <div class="profile-actions">
                  <div class="profile-action-row">
                    <div>
                      <div class="profile-action-label">Change Username</div>
                      <div class="profile-action-desc">Update your display name</div>
                    </div>
                    <button class="profile-btn profile-btn-outline" id="changeUsernameBtn">Change</button>
                  </div>

                  <div class="profile-action-row">
                    <div>
                      <div class="profile-action-label">Change Password</div>
                      <div class="profile-action-desc">Update your account password</div>
                    </div>
                    <button class="profile-btn profile-btn-outline" id="changePasswordBtn">Change</button>
                  </div>

                  <div class="profile-action-row">
                    <div>
                      <div class="profile-action-label">Sync Data</div>
                      <div class="profile-action-desc">Manually sync your settings</div>
                    </div>
                    <button class="profile-btn profile-btn-outline" id="syncDataBtn">Sync Now</button>
                  </div>

                  <div class="profile-action-row">
                    <div>
                      <div class="profile-action-label">Sign Out</div>
                      <div class="profile-action-desc">Log out of your account</div>
                    </div>
                    <button class="profile-btn profile-btn-danger" id="logoutBtn">Sign Out</button>
                  </div>
                </div>

                <div class="sync-status" id="syncStatus">
                  <svg class="sync-status-icon" viewBox="0 0 24 24"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg>
                  <span id="syncStatusText">Data synced</span>
                </div>
              </div>
            </div>

            <div style="height:16px;"></div>

            <h2>Misc</h2>
            <p class="description">Utility links and tools related to this project.</p>

            <div class="subsection" style="padding:10px;">
              <h3 style="margin:0;font-size:15px;color:var(--primary-accent);font-weight:600;">Credits</h3>
              <p class="description" style="margin-top:6px;">People who contributed to this project.</p>
              <div class="credit-list" style="display:flex; gap:12px; flex-wrap:wrap;">
                <div class="credit-card" style="display:flex; flex-direction:column; align-items:center; text-align:center; width:120px;">
                  <img src="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/credits/reillyxx12.png" alt="Developer" style="width:80px; height:80px; border-radius:50%; object-fit:cover;">
                  <div style="font-weight:600; margin-top:8px;">reillyxx12</div>
                  <div class="description" style="margin-top:4px; font-size:14px;">Owner and developer.</div>
                </div>
                <div class="credit-card" style="display:flex; flex-direction:column; align-items:center; text-align:center; width:120px;">
                  <img src="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/credits/makimixel.png" alt="Backend Developer" style="width:80px; height:80px; border-radius:50%; object-fit:cover;">
                  <div style="font-weight:600; margin-top:8px;">makimixel</div>
                  <div class="description" style="margin-top:4px; font-size:14px;">Helped with backend.</div>
                </div>
                <div class="credit-card" style="display:flex; flex-direction:column; align-items:center; text-align:center; width:120px;">
                  <img src="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/credits/rikaish.png" alt="JS Developer" style="width:80px; height:80px; border-radius:50%; object-fit:cover;">
                  <div style="font-weight:600; margin-top:8px;">rikaish</div>
                  <div class="description" style="margin-top:4px; font-size:14px;">Assisted in javascript.</div>
                </div>
                <div class="credit-card" style="display:flex; flex-direction:column; align-items:center; text-align:center; width:120px;">
                  <img src="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/credits/idgafabtu.png" alt="Tester" style="width:80px; height:80px; border-radius:50%; object-fit:cover;">
                  <div style="font-weight:600; margin-top:8px;">idgafabtu</div>
                  <div class="description" style="margin-top:4px; font-size:14px;">Helped with testing.</div>
                </div>
              </div>
            </div>

            <div style="height:12px;"></div>

            <div class="subsection" style="padding:10px;">
              <h3 style="margin:0;font-size:15px;color:var(--primary-accent);font-weight:600;">Data</h3>
              <p class="description" style="margin-top:6px;">Export and import data to preserve progress in-case website gets blocked</p>
              <div class="row" style="margin-top:8px;">
                <a class="blank-link" id="downloadCookie" role="button" href="#" aria-label="Download settings">Download Data</a>
                <a class="blank-link" id="uploadCookie" role="button" style="background:transparent;border:1px solid var(--surface);color:var(--muted);" href="#" aria-label="Upload settings">Upload Data</a>
              </div>
            </div>

            <div style="height:12px;"></div>

            <div class="subsection" style="padding:10px;">
              <div class="uptime-block" role="region" aria-labelledby="uptime-title">
                <div class="uptime-info">
                  <p id="uptime-title" class="uptime-title">Uptime</p>
                  <p class="uptime-desc">Open the project's uptime status page to view current availability, incidents, and historical uptime metrics.</p>
                </div>
                <div class="uptime-actions">
                  <a class="uptime-btn" role="button" href="https://nexora.betteruptime.com/" target="_blank" rel="noopener noreferrer" aria-label="Open Uptime">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>
            </div>

            <div style="height:12px;"></div>

            <div class="subsection" style="padding:10px;">
              <div class="discord-block" role="region" aria-labelledby="discord-title">
                <div class="discord-info">
                  <p id="discord-title" class="discord-title">Discord</p>
                  <p class="discord-desc">Join the community on Discord for updates, support, and discussion with other users and contributors.</p>
                </div>
                <div class="discord-actions">
                  <a class="discord-btn" role="button" href="https://discord.gg/Xk4tSPezEU" target="_blank" rel="noopener noreferrer" aria-label="Open Discord">
                    <span>Open</span>
                    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3zM5 5h6v2H7v10h10v-4h2v6H5V5z"/></svg>
                  </a>
                </div>
              </div>
            </div>

            <div style="height:12px;"></div>

            <div class="subsection" style="padding:10px;">
              <div class="partners-block" role="region" aria-labelledby="partners-title">
                <div class="partners-info">
                  <p id="partners-title" class="policy-title">Partners</p>
                  <p class="description" style="margin-top:6px;">Projects that collaborate with or support this project.</p>
                </div>

                <div class="partner-list">
                  <div class="partner-item" role="group" aria-label="Partner Demon">
                    <div class="partner-info">
                      <div class="partner-logo" aria-hidden="true">
                        <img src="https://cdn.jsdelivr.net/gh/nexora240-lgtm/Nexora-Assets/partners/demon.png" alt="" class="favicon-thumb" style="width:36px;height:36px;border-radius:6px;">
                      </div>
                      <div>
                        <div class="partner-name">Demon</div>
                        <div class="partner-desc">Totally Educational Games and much more at Demon.</div>
                      </div>
                    </div>
                    <div>
                      <a class="policy-btn" role="button" href="https://demonzero.lat/" target="_blank" rel="noopener noreferrer" aria-label="Open Demon">Visit</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="auth-modal-overlay" id="authModal">
    <div class="auth-modal">
      <div class="auth-modal-header">
        <h2 class="auth-modal-title" id="authModalTitle">Sign In</h2>
        <button class="auth-modal-close" id="authModalClose" aria-label="Close">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <form class="auth-form" id="authForm">
        <div class="auth-error" id="authError"></div>
        <div class="auth-success" id="authSuccess"></div>

        <div class="auth-field">
          <label for="authUsername">Username</label>
          <input type="text" id="authUsername" name="username" placeholder="Enter username" autocomplete="username" required>
        </div>

        <div class="auth-field" id="currentPasswordField" style="display: none;">
          <label for="authCurrentPassword">Current Password</label>
          <input type="password" id="authCurrentPassword" name="currentPassword" placeholder="Enter current password" autocomplete="current-password">
        </div>

        <div class="auth-field">
          <label for="authPassword" id="authPasswordLabel">Password</label>
          <input type="password" id="authPassword" name="password" placeholder="Enter password" autocomplete="current-password" required>
        </div>

        <div class="auth-field" id="confirmPasswordField" style="display: none;">
          <label for="authConfirmPassword">Confirm Password</label>
          <input type="password" id="authConfirmPassword" name="confirmPassword" placeholder="Confirm password" autocomplete="new-password">
        </div>

        <button type="submit" class="auth-btn auth-btn-primary" id="authSubmitBtn">Sign In</button>
      </form>

      <div class="auth-divider" id="authDivider">or</div>

      <div class="auth-switch" id="authSwitch">
        Don't have an account? <a id="authSwitchLink">Create one</a>
      </div>
    </div>
  </div>

  <script src="/config.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/settings.js"></script>
  <script>
    // Auth modal and profile UI logic
    (function() {
      const modal = document.getElementById('authModal');
      const modalTitle = document.getElementById('authModalTitle');
      const authForm = document.getElementById('authForm');
      const authError = document.getElementById('authError');
      const authSuccess = document.getElementById('authSuccess');
      const authUsername = document.getElementById('authUsername');
      const authPassword = document.getElementById('authPassword');
      const authCurrentPassword = document.getElementById('authCurrentPassword');
      const authConfirmPassword = document.getElementById('authConfirmPassword');
      const authPasswordLabel = document.getElementById('authPasswordLabel');
      const currentPasswordField = document.getElementById('currentPasswordField');
      const confirmPasswordField = document.getElementById('confirmPasswordField');
      const authSubmitBtn = document.getElementById('authSubmitBtn');
      const authSwitch = document.getElementById('authSwitch');
      const authSwitchLink = document.getElementById('authSwitchLink');
      const authDivider = document.getElementById('authDivider');
      const authModalClose = document.getElementById('authModalClose');

      const profileLoggedOut = document.getElementById('profileLoggedOut');
      const profileLoggedIn = document.getElementById('profileLoggedIn');
      const profileAvatar = document.getElementById('profileAvatar');
      const profileUsername = document.getElementById('profileUsername');
      const openAuthBtn = document.getElementById('openAuthBtn');
      const changeUsernameBtn = document.getElementById('changeUsernameBtn');
      const changePasswordBtn = document.getElementById('changePasswordBtn');
      const syncDataBtn = document.getElementById('syncDataBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const syncStatus = document.getElementById('syncStatus');
      const syncStatusText = document.getElementById('syncStatusText');

      let authMode = 'login'; // 'login', 'register', 'changePassword', 'changeUsername'

      function openModal(mode) {
        authMode = mode;
        authError.textContent = '';
        authError.classList.remove('show');
        authSuccess.textContent = '';
        authSuccess.classList.remove('show');
        authForm.reset();

        currentPasswordField.style.display = 'none';
        confirmPasswordField.style.display = 'none';
        authUsername.closest('.auth-field').style.display = 'block';
        authPassword.closest('.auth-field').style.display = 'block';
        authSwitch.style.display = 'block';
        authDivider.style.display = 'flex';
        authUsername.disabled = false;

        if (mode === 'login') {
          modalTitle.textContent = 'Sign In';
          authPasswordLabel.textContent = 'Password';
          authPassword.placeholder = 'Enter password';
          authPassword.autocomplete = 'current-password';
          authSubmitBtn.textContent = 'Sign In';
          authSwitchLink.textContent = 'Create one';
          authSwitch.innerHTML = "Don't have an account? <a id='authSwitchLink'>Create one</a>";
        } else if (mode === 'register') {
          modalTitle.textContent = 'Create Account';
          authPasswordLabel.textContent = 'Password';
          authPassword.placeholder = 'Create a password (min 6 characters)';
          authPassword.autocomplete = 'new-password';
          confirmPasswordField.style.display = 'block';
          authSubmitBtn.textContent = 'Create Account';
          authSwitch.innerHTML = "Already have an account? <a id='authSwitchLink'>Sign in</a>";
        } else if (mode === 'changePassword') {
          modalTitle.textContent = 'Change Password';
          authUsername.closest('.auth-field').style.display = 'none';
          currentPasswordField.style.display = 'block';
          authPasswordLabel.textContent = 'New Password';
          authPassword.placeholder = 'Enter new password';
          authPassword.autocomplete = 'new-password';
          confirmPasswordField.style.display = 'block';
          authSubmitBtn.textContent = 'Change Password';
          authSwitch.style.display = 'none';
          authDivider.style.display = 'none';
        } else if (mode === 'changeUsername') {
          modalTitle.textContent = 'Change Username';
          const session = NexoraAuth.getSession();
          authUsername.value = session?.displayName || '';
          authPassword.closest('.auth-field').style.display = 'none';
          authSubmitBtn.textContent = 'Change Username';
          authSwitch.style.display = 'none';
          authDivider.style.display = 'none';
        }

        // Rebind switch link
        const newSwitchLink = document.getElementById('authSwitchLink');
        if (newSwitchLink) {
          newSwitchLink.addEventListener('click', () => {
            openModal(authMode === 'login' ? 'register' : 'login');
          });
        }

        modal.classList.add('active');
      }

      function closeModal() {
        modal.classList.remove('active');
      }

      function showError(msg) {
        authError.textContent = msg;
        authError.classList.add('show');
        authSuccess.classList.remove('show');
      }

      function showSuccess(msg) {
        authSuccess.textContent = msg;
        authSuccess.classList.add('show');
        authError.classList.remove('show');
      }

      function updateProfileUI(session) {
        if (session) {
          profileLoggedOut.style.display = 'none';
          profileLoggedIn.style.display = 'block';
          profileUsername.textContent = session.displayName || session.username;
          profileAvatar.textContent = (session.displayName || session.username).charAt(0).toUpperCase();
        } else {
          profileLoggedOut.style.display = 'block';
          profileLoggedIn.style.display = 'none';
        }
      }

      async function setSyncStatus(status, text) {
        syncStatus.className = 'sync-status ' + status;
        syncStatusText.textContent = text;
      }

      // Form submission
      authForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        authSubmitBtn.disabled = true;

        try {
          if (authMode === 'login') {
            await NexoraAuth.login(authUsername.value, authPassword.value);
            showSuccess('Logged in! Applying your saved settings...');
            // Page will reload automatically if cloud data exists
          } else if (authMode === 'register') {
            if (authPassword.value !== authConfirmPassword.value) {
              throw new Error('Passwords do not match');
            }
            await NexoraAuth.register(authUsername.value, authPassword.value);
            showSuccess('Account created successfully!');
            setTimeout(closeModal, 1000);
          } else if (authMode === 'changePassword') {
            if (authPassword.value !== authConfirmPassword.value) {
              throw new Error('Passwords do not match');
            }
            await NexoraAuth.changePassword(authCurrentPassword.value, authPassword.value);
            showSuccess('Password changed successfully!');
            setTimeout(closeModal, 1000);
          } else if (authMode === 'changeUsername') {
            await NexoraAuth.changeUsername(authUsername.value);
            showSuccess('Username changed successfully!');
            setTimeout(closeModal, 1000);
          }
        } catch (err) {
          showError(err.message || 'An error occurred');
        }

        authSubmitBtn.disabled = false;
      });

      // Event listeners
      openAuthBtn?.addEventListener('click', () => openModal('login'));
      changeUsernameBtn?.addEventListener('click', () => openModal('changeUsername'));
      changePasswordBtn?.addEventListener('click', () => openModal('changePassword'));
      authModalClose?.addEventListener('click', closeModal);
      modal?.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });

      syncDataBtn?.addEventListener('click', async () => {
        setSyncStatus('syncing', 'Syncing...');
        try {
          await NexoraAuth.sync();
          setSyncStatus('synced', 'Data synced successfully');
        } catch (err) {
          setSyncStatus('error', 'Sync failed');
        }
      });

      logoutBtn?.addEventListener('click', async () => {
        await NexoraAuth.logout();
      });

      // Listen for auth changes
      if (typeof NexoraAuth !== 'undefined') {
        NexoraAuth.onAuthChange(updateProfileUI);
      }

      // Listen for data sync events
      window.addEventListener('nexora:datasynced', () => {
        setSyncStatus('synced', 'Data synced');
      });
    })();
  </script>
  <script
    type="text/javascript"
    src="https://pl28203657.effectivegatecpm.com/20/0c/22/200c228c3e54f168aababb866607dcd7.js"
  ></script>
</body>
</html>
